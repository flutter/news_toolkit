"use strict";(self.webpackChunkflutter_news_toolkit_docs=self.webpackChunkflutter_news_toolkit_docs||[]).push([[173],{8153:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var r=s(5893),a=s(1151);const i={sidebar_position:4,description:"Learn how to configure or remove ads in your application."},t="Ads setup or removal",d={id:"project_configuration/ads",title:"Ads setup or removal",description:"Learn how to configure or remove ads in your application.",source:"@site/docs/project_configuration/ads.md",sourceDirName:"project_configuration",slug:"/project_configuration/ads",permalink:"/news_toolkit/project_configuration/ads",draft:!1,unlisted:!1,editUrl:"https://github.com/flutter/news_toolkit/tree/main/docs/docs/project_configuration/ads.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"Learn how to configure or remove ads in your application."},sidebar:"tutorialSidebar",previous:{title:"Authentication setup",permalink:"/news_toolkit/project_configuration/social_authentication"},next:{title:"Notifications setup",permalink:"/news_toolkit/project_configuration/notifications"}},o={},l=[{value:"Configure ads",id:"configure-ads",level:2},{value:"Google Ad Manager",id:"google-ad-manager",level:3},{value:"Create apps",id:"create-apps",level:4},{value:"Firebase configuraton",id:"firebase-configuraton",level:4},{value:"Google AdMob",id:"google-admob",level:3},{value:"Create apps",id:"create-apps-1",level:4},{value:"Firebase configuraton",id:"firebase-configuraton-1",level:4},{value:"Swap ad IDs",id:"swap-ad-ids",level:3},{value:"Remove ads",id:"remove-ads",level:2},{value:"Removing banner ads",id:"removing-banner-ads",level:3},{value:"Removing interstitial ads",id:"removing-interstitial-ads",level:3},{value:"Removing sticky ads",id:"removing-sticky-ads",level:3},{value:"Removing rewarded ads",id:"removing-rewarded-ads",level:3},{value:"Removing advertisement dependencies",id:"removing-advertisement-dependencies",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"ads-setup-or-removal",children:"Ads setup or removal"}),"\n",(0,r.jsx)(n.p,{children:"The Flutter News Toolkit is pre-configured to work with Google Ad Manager or AdMob. Follow the configuration steps below if you would like to monetize your app with either of these services."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If you don't want to monetize your app with Google Ad Manager or AdMob, follow the instructions in the ",(0,r.jsx)(n.a,{href:"#remove-ads",children:"Remove ads"})," section."]})}),"\n",(0,r.jsx)(n.h2,{id:"configure-ads",children:"Configure ads"}),"\n",(0,r.jsx)(n.h3,{id:"google-ad-manager",children:"Google Ad Manager"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://admanager.google.com",children:"Google Ad Manager"})," offers publishers a complete ad revenue engine, helping clients streamline operations and capture the most value for every impression. To leverage this ad exchange platform in your app, visit ",(0,r.jsx)(n.a,{href:"https://admanager.google.com",children:"Google Ad Manager"})," and enter your Google Account username and password to sign in. If you don't have an account, ",(0,r.jsx)(n.a,{href:"https://admanager.google.com/home/contact-us/",children:"sign up for an Ad Manager account"})," to get started."]}),"\n",(0,r.jsx)(n.h4,{id:"create-apps",children:"Create apps"}),"\n",(0,r.jsxs)(n.p,{children:["After successfully creating an account or logging into an existing account, create an app for each platform and flavor. By default, you'll need an app for Android ",(0,r.jsx)(n.code,{children:"development"})," and ",(0,r.jsx)(n.code,{children:"production"})," flavors and iOS ",(0,r.jsx)(n.code,{children:"development"})," and ",(0,r.jsx)(n.code,{children:"production"})," flavors (4 apps total). If you created additional flavors when generating your project with mason, be sure to create corresponding apps in your Google Ad Manager."]}),"\n",(0,r.jsx)(n.h4,{id:"firebase-configuraton",children:"Firebase configuraton"}),"\n",(0,r.jsxs)(n.p,{children:["After generating your apps, return to your Firebase Console to link the Google Ad Manager apps to their respective Firebase apps in the ",(0,r.jsx)(n.strong,{children:"Engage --\x3e AdMob"})," section of your Firebase project."]}),"\n",(0,r.jsx)(n.h3,{id:"google-admob",children:"Google AdMob"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://admob.google.com/home/",children:"Google AdMob"})," makes earning revenue easy with in-app ads, actionable insights, and powerful, easy-to-use tools that grow your app business. To use this service in your apps, visit Google AdMob to log in or ",(0,r.jsx)(n.a,{href:"https://apps.admob.com/signup/?_ga=2.23772223.461135622.1667403019-1758917868.1667403019&_gl=1*akwl9n*_ga*MTc1ODkxNzg2OC4xNjY3NDAzMDE5*_ga_6R1K8XRD9P*MTY2NzQwMzAxOC4xLjAuMTY2NzQwMzEzOS4wLjAuMA..",children:"create an account"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"create-apps-1",children:"Create apps"}),"\n",(0,r.jsxs)(n.p,{children:["After successfully creating an account or logging into an existing account, create an app for each platform and flavor. By default, you'll need an app for Android ",(0,r.jsx)(n.strong,{children:"development"})," and ",(0,r.jsx)(n.strong,{children:"production"})," flavors and iOS ",(0,r.jsx)(n.strong,{children:"development"})," and ",(0,r.jsx)(n.strong,{children:"production"})," flavors (4 apps total). If you created additional flavors when generating your project with mason, be sure to create corresponding apps in your Google AdMob account."]}),"\n",(0,r.jsx)(n.h4,{id:"firebase-configuraton-1",children:"Firebase configuraton"}),"\n",(0,r.jsxs)(n.p,{children:["After generating your apps, return to your Firebase Console to link the Google AdMob apps to their respective Firebase apps in the ",(0,r.jsx)(n.strong,{children:"Engage --\x3e AdMob"})," section of your Firebase project."]}),"\n",(0,r.jsx)(n.h3,{id:"swap-ad-ids",children:"Swap ad IDs"}),"\n",(0,r.jsx)(n.p,{children:"Finally, you must specify your app IDs regardless of whether you are using Google AdMob or Google Ad Manager."}),"\n",(0,r.jsxs)(n.p,{children:["First, find your ",(0,r.jsx)(n.a,{href:"https://support.google.com/admanager/answer/1656921#copy-id",children:"Google Ad Manager app IDs"})," or ",(0,r.jsx)(n.a,{href:"https://support.google.com/admob/answer/7356431",children:"AdMob app IDs"}),". For every app flavor's ",(0,r.jsx)(n.code,{children:"strings.xml"})," file in your codebase, replace the placeholder value associated with the ",(0,r.jsx)(n.code,{children:"admob_app_id"})," key with your flavor-specific app ID. Repeat this procedure and replace the placeholder value for every ",(0,r.jsx)(n.code,{children:"ADMOB_APP_ID"})," key within your ",(0,r.jsx)(n.code,{children:"project.pbxproj"})," file."]}),"\n",(0,r.jsx)(n.h2,{id:"remove-ads",children:"Remove ads"}),"\n",(0,r.jsx)(n.p,{children:"You might want to remove advertisements from your app. This section discusses how to remove the various advertisement types and their dependencies."}),"\n",(0,r.jsx)(n.h3,{id:"removing-banner-ads",children:"Removing banner ads"}),"\n",(0,r.jsxs)(n.p,{children:["Banner ads in the ",(0,r.jsx)(n.code,{children:"static_news_data.dart"})," file are displayed by default. To ensure that your app won't display ",(0,r.jsx)(n.code,{children:"BannerAds"}),", don't insert ",(0,r.jsx)(n.code,{children:"AdBlocks"})," into the data returned from your ",(0,r.jsx)(n.a,{href:"/server_development/connecting_your_data_source",children:"data source"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"removing-interstitial-ads",children:"Removing interstitial ads"}),"\n",(0,r.jsxs)(n.p,{children:["By default, entering an article displays interstitial ads. To remove interstitial ads entirely, delete the following line from ",(0,r.jsx)(n.code,{children:"_ArticleViewState"}),"'s ",(0,r.jsx)(n.code,{children:"initState"})," method (",(0,r.jsx)(n.code,{children:"lib/article/view/article_page.dart"}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"context.read<FullScreenAdsBloc>().add(const ShowInterstitialAdRequested());\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removing-sticky-ads",children:"Removing sticky ads"}),"\n",(0,r.jsxs)(n.p,{children:["The template contains a sticky ad in ",(0,r.jsx)(n.code,{children:"ArticleContent"})," (",(0,r.jsx)(n.code,{children:"lib/article/widgets/article_content.dart"}),"). To remove it, delete the ",(0,r.jsx)(n.code,{children:"StickyAd()"})," constructor call from the ",(0,r.jsx)(n.code,{children:"ArticleContent"})," widget's ",(0,r.jsx)(n.code,{children:"Stack.children"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"removing-rewarded-ads",children:"Removing rewarded ads"}),"\n",(0,r.jsxs)(n.p,{children:["Rewarded ads are built inside the ",(0,r.jsx)(n.code,{children:"SubscribeWithArticleLimitModal"})," widget (",(0,r.jsx)(n.code,{children:"lib/subscriptions/widgets/subscribe_with_article_limit_modal.dart"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:['To remove the rewarded ad option for premium articles, delete the "show rewarded ad" button block in the ',(0,r.jsx)(n.code,{children:"SubscribeWithArticleLimitModal"})," widget:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"Padding(\n    padding: const EdgeInsets.symmetric(\n        horizontal: AppSpacing.lg + AppSpacing.xxs,\n    ),\n    child: AppButton.transparentWhite(\n        key: const Key(\n            'subscribeWithArticleLimitModal_watchVideoButton',\n        ),\n        onPressed: () => context\n            .read<FullScreenAdsBloc>()\n            .add(const ShowRewardedAdRequested()),\n        child: Row(\n            mainAxisAlignment: MainAxisAlignment.center,\n            children: [\n                Assets.icons.video.svg(),\n                const SizedBox(width: AppSpacing.sm),\n                Text(watchVideoButtonTitle),\n            ],\n        ),\n    ),\n),\n"})}),"\n",(0,r.jsx)(n.h3,{id:"removing-advertisement-dependencies",children:"Removing advertisement dependencies"}),"\n",(0,r.jsx)(n.p,{children:"When removing advertisements from your app, it's best to remove all advertisement-related dependencies from your codebase."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Ad Source Code"})}),"\n",(0,r.jsx)(n.p,{children:"Remove the following directories and files entirely:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/ads"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/test/ads"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/ads_consent_client"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/lib/src/widgets/banner_ad_content.dart"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/test/src/widgets/banner_ad_content_test.dart"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/lib/src/banner_ad.dart"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/test/src/banner_ad_test.dart"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Remove the noted snippets from the files below:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/app/view/app.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"required AdsConsentClient adsConsentClient,\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"_adsConsentClient = adsConsentClient,\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"final AdsConsentClient _adsConsentClient;\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"RepositoryProvider.value(value: _adsConsentClient),\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"BlocProvider(\n  create: (context) => FullScreenAdsBloc(\n    interstitialAdLoader: ads.InterstitialAd.load,\n    rewardedAdLoader: ads.RewardedAd.load,\n    adsRetryPolicy: const AdsRetryPolicy(),\n    localPlatform: const LocalPlatform(),\n  )\n    ..add(const LoadInterstitialAdRequested())\n    ..add(const LoadRewardedAdRequested()),\n  lazy: false,\n),\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/article/view/article_page.dart"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"HasWatchedRewardedAdListener"})," class"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"HasWatchedRewardedAdListener"})," widget (retain the child ",(0,r.jsx)(n.code,{children:"Scaffold"})," widget)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/main/main_development.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"final adsConsentClient = AdsConsentClient();\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"adsConsentClient: adsConsentClient,\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/main/main_production.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"final adsConsentClient = AdsConsentClient();\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"adsConsentClient: adsConsentClient,\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/onboarding/bloc/onboarding_bloc.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"required AdsConsentClient adsConsentClient,\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"_adsConsentClient = adsConsentClient,\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"on<EnableAdTrackingRequested>(\n  _onEnableAdTrackingRequested,\n  transformer: droppable(),\n);\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"final AdsConsentClient _adsConsentClient;\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["the ",(0,r.jsx)(n.code,{children:"_onEnableAdTrackingRequested()"})," function"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/onboarding/view/onboarding_page.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"adsConsentClient: context.read<AdsConsentClient>(),\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/article/widgets/article_content_item.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"else if (newsBlock is BannerAdBlock) {\n  return BannerAd(\n    block: newsBlock,\n    adFailedToLoadTitle: context.l10n.adLoadFailure,\n  );\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/lib/article/widgets/article_content_item.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"else if (newsBlock is BannerAdBlock) {\n  return BannerAd(\n    block: newsBlock,\n    adFailedToLoadTitle: context.l10n.adLoadFailure,\n  );\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/lib/news_blocks_ui.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"export 'src/banner_ad.dart' show BannerAd;\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/lib/src/widgets/widges.dart"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"export 'banner_ad_content.dart';\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Pubspec Ad Depenedencies"})}),"\n",(0,r.jsxs)(n.p,{children:["Remove the ",(0,r.jsx)(n.code,{children:"google_mobile_ads"})," dependency from the ",(0,r.jsx)(n.code,{children:"flutter_news_example/packages/news_blocks_ui/pubspec.yaml"})," file, as well as all corresponding import statements:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import  'package:google_mobile_ads/google_mobile_ads.dart'\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Remove the ",(0,r.jsx)(n.code,{children:"ads_consent_client"})," dependency from ",(0,r.jsx)(n.code,{children:"flutter_news_example/pubspec.yaml"}),", as well as all ",(0,r.jsx)(n.code,{children:"ads_consent_client"})," and all ",(0,r.jsx)(n.code,{children:"ads"})," import statements:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"import 'package:ads_consent_client/ads_consent_client.dart';\nimport 'package:flutter_news_template/ads/ads.dart';\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>d,a:()=>t});var r=s(7294);const a={},i=r.createContext(a);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);